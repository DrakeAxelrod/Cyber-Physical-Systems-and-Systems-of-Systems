\hypertarget{classcluon_1_1EnvelopeConverter}{}\doxysection{cluon\+::Envelope\+Converter Class Reference}
\label{classcluon_1_1EnvelopeConverter}\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}


{\ttfamily \#include $<$cluon-\/complete.\+hpp$>$}



Collaboration diagram for cluon\+::Envelope\+Converter\+:
% FIG 0
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a5e8ece063bd077c98698288eb4d49b65}{Envelope\+Converter}} ()=default
\item 
int32\+\_\+t \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_af4879d33814e727df61273fdd4ed973b}{set\+Message\+Specification}} (const std\+::string \&ms) noexcept
\item 
std\+::string \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_adb3484e4e1336792ffb51d870e0f8028}{get\+JSONFrom\+Proto\+Encoded\+Envelope}} (const std\+::string \&proto\+Encoded\+Envelope) noexcept
\item 
std\+::string \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a8d7438e6f54c7d4034688634a19ece83}{get\+JSONFrom\+Envelope}} (\mbox{\hyperlink{classcluon_1_1data_1_1Envelope}{cluon\+::data\+::\+Envelope}} \&envelope) noexcept
\item 
std\+::string \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_ab102d020ec1701c9e6b545f05f4dc6c8}{get\+Proto\+Encoded\+Envelope\+From\+JSONWithout\+Time\+Stamps}} (const std\+::string \&json, int32\+\_\+t message\+Identifier, uint32\+\_\+t sender\+Stamp) noexcept
\item 
std\+::string \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a8416ac700d2c3c656260e2ea4b002397}{get\+Proto\+Encoded\+Envelope\+From\+JSON}} (const std\+::string \&json, int32\+\_\+t message\+Identifier, uint32\+\_\+t sender\+Stamp) noexcept
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a05d9f4da0a47cbfb0d4d203800b070c7}{Envelope\+Converter}} (const \mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&)=delete
\item 
\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a77d823d0838c840b6f07ec108e044d0b}{Envelope\+Converter}} (\mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&\&)=delete
\item 
\mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \& \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_af7614f0f507b9407874d4fecd316006c}{operator=}} (const \mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&)=delete
\item 
\mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \& \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a232227fe86e65d155f0ef12461224ba4}{operator=}} (\mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&\&)=delete
\item 
std\+::string \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_ac046a7e7de1fec61f44ca2ece7df11bc}{get\+Proto\+Encoded\+Envelope\+From\+JSON}} (const std\+::string \&json, int32\+\_\+t message\+Identifier, uint32\+\_\+t sender\+Stamp, \mbox{\hyperlink{classcluon_1_1data_1_1TimeStamp}{cluon\+::data\+::\+Time\+Stamp}} sample\+Time\+Stamp) noexcept
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
std\+::vector$<$ \mbox{\hyperlink{classcluon_1_1MetaMessage}{cluon\+::\+Meta\+Message}} $>$ \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\+\_\+list\+Of\+Meta\+Messages}} \{\}
\item 
std\+::map$<$ int32\+\_\+t, \mbox{\hyperlink{classcluon_1_1MetaMessage}{cluon\+::\+Meta\+Message}} $>$ \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\+\_\+scope\+Of\+Meta\+Messages}} \{\}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
This class provides various conversion functions to and from Envelope data structures. 

\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a05d9f4da0a47cbfb0d4d203800b070c7}\label{classcluon_1_1EnvelopeConverter_a05d9f4da0a47cbfb0d4d203800b070c7}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!EnvelopeConverter@{EnvelopeConverter}}
\index{EnvelopeConverter@{EnvelopeConverter}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{EnvelopeConverter()}{EnvelopeConverter()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily cluon\+::\+Envelope\+Converter\+::\+Envelope\+Converter (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [delete]}}

\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a77d823d0838c840b6f07ec108e044d0b}\label{classcluon_1_1EnvelopeConverter_a77d823d0838c840b6f07ec108e044d0b}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!EnvelopeConverter@{EnvelopeConverter}}
\index{EnvelopeConverter@{EnvelopeConverter}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{EnvelopeConverter()}{EnvelopeConverter()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily cluon\+::\+Envelope\+Converter\+::\+Envelope\+Converter (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [delete]}}

\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a5e8ece063bd077c98698288eb4d49b65}\label{classcluon_1_1EnvelopeConverter_a5e8ece063bd077c98698288eb4d49b65}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!EnvelopeConverter@{EnvelopeConverter}}
\index{EnvelopeConverter@{EnvelopeConverter}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{EnvelopeConverter()}{EnvelopeConverter()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily cluon\+::\+Envelope\+Converter\+::\+Envelope\+Converter (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [default]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a8d7438e6f54c7d4034688634a19ece83}\label{classcluon_1_1EnvelopeConverter_a8d7438e6f54c7d4034688634a19ece83}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!getJSONFromEnvelope@{getJSONFromEnvelope}}
\index{getJSONFromEnvelope@{getJSONFromEnvelope}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{getJSONFromEnvelope()}{getJSONFromEnvelope()}}
{\footnotesize\ttfamily std\+::string cluon\+::\+Envelope\+Converter\+::get\+JSONFrom\+Envelope (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcluon_1_1data_1_1Envelope}{cluon\+::data\+::\+Envelope}} \&}]{envelope }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

This method transforms the given Envelope to JSON.


\begin{DoxyParams}{Parameters}
{\em envelope} & Envelope. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON representation from given Envelope using the given message specification. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{14263                                                                                             \{}
\DoxyCodeLine{14264     std::string \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}}\{\textcolor{stringliteral}{"{}\{\}"{}}\};}
\DoxyCodeLine{14265     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}}.empty()) \{}
\DoxyCodeLine{14266         \textcolor{keywordflow}{if} (0 < \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\_scopeOfMetaMessages}}.count(envelope.\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_abc59b3c43fef22b8d12bbce309a1504c}{dataType}}())) \{}
\DoxyCodeLine{14267             \textcolor{comment}{// First, create JSON from Envelope.}}
\DoxyCodeLine{14268             \textcolor{keyword}{constexpr} \textcolor{keywordtype}{bool} OUTER\_CURLY\_BRACES\{\textcolor{keyword}{false}\};}
\DoxyCodeLine{14269             \textcolor{comment}{// Ignore field 2 (= serializedData) as it will be replaced below.}}
\DoxyCodeLine{14270             \textcolor{keyword}{const} std::map<uint32\_t, bool> mask\{\{2, \textcolor{keyword}{false}\}\};}
\DoxyCodeLine{14271             ToJSONVisitor envelopeToJSON\{OUTER\_CURLY\_BRACES, mask\};}
\DoxyCodeLine{14272             envelope.\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_afb1dfa6ca6a92b9c5eba3a1201b16dbd}{accept}}(envelopeToJSON);}
\DoxyCodeLine{14273 }
\DoxyCodeLine{14274             std::stringstream sstr\{envelope.\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a9b33bb1e804140e808a61a995278f82b}{serializedData}}()\};}
\DoxyCodeLine{14275             \mbox{\hyperlink{classcluon_1_1FromProtoVisitor}{cluon::FromProtoVisitor}} protoDecoder;}
\DoxyCodeLine{14276             protoDecoder.\mbox{\hyperlink{classcluon_1_1FromProtoVisitor_a40200331aef897bc2ec90d5cf9c20519}{decodeFrom}}(sstr);}
\DoxyCodeLine{14277 }
\DoxyCodeLine{14278             \textcolor{comment}{// Now, create JSON from payload.}}
\DoxyCodeLine{14279             \mbox{\hyperlink{classcluon_1_1MetaMessage}{cluon::MetaMessage}} payload\{\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\_scopeOfMetaMessages}}[envelope.\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_abc59b3c43fef22b8d12bbce309a1504c}{dataType}}()]\};}
\DoxyCodeLine{14280             \mbox{\hyperlink{classcluon_1_1GenericMessage}{cluon::GenericMessage}} gm;}
\DoxyCodeLine{14281 }
\DoxyCodeLine{14282             \textcolor{comment}{// Create "{}empty"{} GenericMessage from this MetaMessage.}}
\DoxyCodeLine{14283             gm.\mbox{\hyperlink{classcluon_1_1GenericMessage_ad38acdbfe2d5ca936268d48d38fc7f6b}{createFrom}}(payload, \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}});}
\DoxyCodeLine{14284 }
\DoxyCodeLine{14285             \textcolor{comment}{// Set values in the newly created GenericMessage from ProtoDecoder.}}
\DoxyCodeLine{14286             gm.\mbox{\hyperlink{classcluon_1_1GenericMessage_af29d39495dde7f0ef332fcf5df8cb22b}{accept}}(protoDecoder);}
\DoxyCodeLine{14287 }
\DoxyCodeLine{14288             ToJSONVisitor payloadToJSON\{OUTER\_CURLY\_BRACES\};}
\DoxyCodeLine{14289             \textcolor{keywordflow}{try} \{}
\DoxyCodeLine{14290                 \textcolor{comment}{// Catch possible linb::any exception.}}
\DoxyCodeLine{14291                 gm.\mbox{\hyperlink{classcluon_1_1GenericMessage_af29d39495dde7f0ef332fcf5df8cb22b}{accept}}(payloadToJSON);}
\DoxyCodeLine{14292             \} \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} \mbox{\hyperlink{classlinb_1_1bad__any__cast}{linb::bad\_any\_cast}} \&) \{\} \textcolor{comment}{// LCOV\_EXCL\_LINE}}
\DoxyCodeLine{14293 }
\DoxyCodeLine{14294             std::string tmp\{payload.messageName()\};}
\DoxyCodeLine{14295             std::replace(tmp.begin(), tmp.end(), \textcolor{charliteral}{'.'}, \textcolor{charliteral}{'\_'});}
\DoxyCodeLine{14296 }
\DoxyCodeLine{14297             \textcolor{keyword}{const} std::string strPayloadJSON\{payloadToJSON.json() != \textcolor{stringliteral}{"{}\{\}"{}} ? payloadToJSON.json() : \textcolor{stringliteral}{"{}"{}}\};}
\DoxyCodeLine{14298 }
\DoxyCodeLine{14299             \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}} = \textcolor{charliteral}{'\{'} + envelopeToJSON.json() + \textcolor{charliteral}{','} + \textcolor{charliteral}{'\(\backslash\)n'} + \textcolor{charliteral}{'"{}'} + tmp + \textcolor{charliteral}{'"{}'} + \textcolor{charliteral}{':'} + \textcolor{charliteral}{'\{'} + strPayloadJSON + \textcolor{charliteral}{'\}'} + \textcolor{charliteral}{'\}'};}
\DoxyCodeLine{14300         \}}
\DoxyCodeLine{14301     \}}
\DoxyCodeLine{14302     \textcolor{keywordflow}{return} \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}};}
\DoxyCodeLine{14303 \}}

\end{DoxyCode}


References \mbox{\hyperlink{classcluon_1_1GenericMessage_af29d39495dde7f0ef332fcf5df8cb22b}{cluon\+::\+Generic\+Message\+::accept()}}, \mbox{\hyperlink{classcluon_1_1GenericMessage_ad38acdbfe2d5ca936268d48d38fc7f6b}{cluon\+::\+Generic\+Message\+::create\+From()}}, \mbox{\hyperlink{classcluon_1_1FromProtoVisitor_a40200331aef897bc2ec90d5cf9c20519}{cluon\+::\+From\+Proto\+Visitor\+::decode\+From()}}, and \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{ret\+Val}}.

Here is the call graph for this function\+:
% FIG 1
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_adb3484e4e1336792ffb51d870e0f8028}\label{classcluon_1_1EnvelopeConverter_adb3484e4e1336792ffb51d870e0f8028}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!getJSONFromProtoEncodedEnvelope@{getJSONFromProtoEncodedEnvelope}}
\index{getJSONFromProtoEncodedEnvelope@{getJSONFromProtoEncodedEnvelope}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{getJSONFromProtoEncodedEnvelope()}{getJSONFromProtoEncodedEnvelope()}}
{\footnotesize\ttfamily std\+::string cluon\+::\+Envelope\+Converter\+::get\+JSONFrom\+Proto\+Encoded\+Envelope (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{proto\+Encoded\+Envelope }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

This method transforms the given Proto-\/encoded Envelope to JSON. The Proto-\/encoded envelope might be preceded with a 5-\/bytes OD4-\/header (optional).


\begin{DoxyParams}{Parameters}
{\em proto\+Encoded\+Envelope} & Proto-\/encoded Envelope. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
JSON representation from given Proto-\/encoded Envelope using the given message specification. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{14230                                                                                                                   \{}
\DoxyCodeLine{14231     std::string \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}}\{\textcolor{stringliteral}{"{}\{\}"{}}\};}
\DoxyCodeLine{14232     \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}}.empty()) \{}
\DoxyCodeLine{14233         \mbox{\hyperlink{classcluon_1_1data_1_1Envelope}{cluon::data::Envelope}} envelope;}
\DoxyCodeLine{14234         std::stringstream sstr(protoEncodedEnvelope);}
\DoxyCodeLine{14235         \textcolor{keyword}{constexpr} uint8\_t OD4\_HEADER\_SIZE\{5\};}
\DoxyCodeLine{14236         \textcolor{keywordflow}{if} (OD4\_HEADER\_SIZE < protoEncodedEnvelope.size()) \{}
\DoxyCodeLine{14237             \textcolor{comment}{// Try decoding complete OD4-\/encoded Envelope including header.}}
\DoxyCodeLine{14238             \textcolor{keyword}{constexpr} uint8\_t byte0\{0x0D\};}
\DoxyCodeLine{14239             \textcolor{keyword}{constexpr} uint8\_t byte1\{0xA4\};}
\DoxyCodeLine{14240             \textcolor{keywordflow}{if} ((\textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(protoEncodedEnvelope.at(0)) == byte0) \&\& (\textcolor{keyword}{static\_cast<}uint8\_t\textcolor{keyword}{>}(protoEncodedEnvelope.at(1)) == byte1)) \{}
\DoxyCodeLine{14241                 uint32\_t length = (*\textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }uint32\_t *\textcolor{keyword}{>}(protoEncodedEnvelope.data() + 1));}
\DoxyCodeLine{14242                 length          = le32toh(length) >> 8;}
\DoxyCodeLine{14243                 \textcolor{keywordflow}{if} ((OD4\_HEADER\_SIZE + length) == protoEncodedEnvelope.size()) \{}
\DoxyCodeLine{14244                     \textcolor{keyword}{auto} result\{\mbox{\hyperlink{namespacecluon_abbf469eea6cc8400c8a0689a7414a570}{extractEnvelope}}(sstr)\};}
\DoxyCodeLine{14245                     \textcolor{keywordflow}{if} (result.first) \{}
\DoxyCodeLine{14246                         envelope = result.second;}
\DoxyCodeLine{14247                     \}}
\DoxyCodeLine{14248                 \}}
\DoxyCodeLine{14249             \}}
\DoxyCodeLine{14250         \}}
\DoxyCodeLine{14251 }
\DoxyCodeLine{14252         \textcolor{keywordflow}{if} (0 == envelope.\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_abc59b3c43fef22b8d12bbce309a1504c}{dataType}}()) \{}
\DoxyCodeLine{14253             \textcolor{comment}{// Directly decoding complete OD4 container failed, try decoding without header.}}
\DoxyCodeLine{14254             \mbox{\hyperlink{classcluon_1_1FromProtoVisitor}{cluon::FromProtoVisitor}} protoDecoder;}
\DoxyCodeLine{14255             protoDecoder.\mbox{\hyperlink{classcluon_1_1FromProtoVisitor_a40200331aef897bc2ec90d5cf9c20519}{decodeFrom}}(sstr, envelope);}
\DoxyCodeLine{14256         \}}
\DoxyCodeLine{14257 }
\DoxyCodeLine{14258         \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}} = \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a8d7438e6f54c7d4034688634a19ece83}{getJSONFromEnvelope}}(envelope);}
\DoxyCodeLine{14259     \}}
\DoxyCodeLine{14260     \textcolor{keywordflow}{return} \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}};}
\DoxyCodeLine{14261 \}}

\end{DoxyCode}


References \mbox{\hyperlink{classcluon_1_1data_1_1Envelope_abc59b3c43fef22b8d12bbce309a1504c}{cluon\+::data\+::\+Envelope\+::data\+Type()}}, \mbox{\hyperlink{classcluon_1_1FromProtoVisitor_a40200331aef897bc2ec90d5cf9c20519}{cluon\+::\+From\+Proto\+Visitor\+::decode\+From()}}, \mbox{\hyperlink{namespacecluon_abbf469eea6cc8400c8a0689a7414a570}{cluon\+::extract\+Envelope()}}, and \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{ret\+Val}}.

Here is the call graph for this function\+:
% FIG 2
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a8416ac700d2c3c656260e2ea4b002397}\label{classcluon_1_1EnvelopeConverter_a8416ac700d2c3c656260e2ea4b002397}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!getProtoEncodedEnvelopeFromJSON@{getProtoEncodedEnvelopeFromJSON}}
\index{getProtoEncodedEnvelopeFromJSON@{getProtoEncodedEnvelopeFromJSON}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{getProtoEncodedEnvelopeFromJSON()}{getProtoEncodedEnvelopeFromJSON()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily std\+::string cluon\+::\+Envelope\+Converter\+::get\+Proto\+Encoded\+Envelope\+From\+JSON (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{json,  }\item[{int32\+\_\+t}]{message\+Identifier,  }\item[{uint32\+\_\+t}]{sender\+Stamp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

This method transforms a given JSON representation into a Proto-\/encoded Envelope including the prepended OD4-\/header and setting \mbox{\hyperlink{namespacecluon_1_1time_a4265a23bd4bd2b5ed37abff8dffddd25}{cluon\+::time\+::now()}} as sample\+Time\+Stamp.


\begin{DoxyParams}{Parameters}
{\em json} & representation according to the given message specification. \\
\hline
{\em message\+Identifier} & The given JSON representation shall be interpreted as the specified message. \\
\hline
{\em sender\+Stamp} & to be used in the Envelope. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Proto-\/encoded Envelope including OD4-\/header or empty string. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{14312                                                                                                                                                    \{}
\DoxyCodeLine{14313     \textcolor{comment}{// clang-\/format on}}
\DoxyCodeLine{14314     \textcolor{keywordflow}{return} \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a8416ac700d2c3c656260e2ea4b002397}{getProtoEncodedEnvelopeFromJSON}}(json, messageIdentifier, senderStamp, \mbox{\hyperlink{namespacecluon_1_1time_a4265a23bd4bd2b5ed37abff8dffddd25}{cluon::time::now}}());}
\DoxyCodeLine{14315 \}}

\end{DoxyCode}


References \mbox{\hyperlink{namespacecluon_1_1time_a4265a23bd4bd2b5ed37abff8dffddd25}{cluon\+::time\+::now()}}.

Here is the call graph for this function\+:
% FIG 3
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_ac046a7e7de1fec61f44ca2ece7df11bc}\label{classcluon_1_1EnvelopeConverter_ac046a7e7de1fec61f44ca2ece7df11bc}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!getProtoEncodedEnvelopeFromJSON@{getProtoEncodedEnvelopeFromJSON}}
\index{getProtoEncodedEnvelopeFromJSON@{getProtoEncodedEnvelopeFromJSON}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{getProtoEncodedEnvelopeFromJSON()}{getProtoEncodedEnvelopeFromJSON()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily std\+::string cluon\+::\+Envelope\+Converter\+::get\+Proto\+Encoded\+Envelope\+From\+JSON (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{json,  }\item[{int32\+\_\+t}]{message\+Identifier,  }\item[{uint32\+\_\+t}]{sender\+Stamp,  }\item[{\mbox{\hyperlink{classcluon_1_1data_1_1TimeStamp}{cluon\+::data\+::\+Time\+Stamp}}}]{sample\+Time\+Stamp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [private]}, {\ttfamily [noexcept]}}


\begin{DoxyCode}{0}
\DoxyCodeLine{14318                                                                                                                                                                                        \{}
\DoxyCodeLine{14319     \textcolor{comment}{// clang-\/format on}}
\DoxyCodeLine{14320     std::string \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}};}
\DoxyCodeLine{14321     \textcolor{keywordflow}{if} (0 < \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\_scopeOfMetaMessages}}.count(messageIdentifier)) \{}
\DoxyCodeLine{14322         \textcolor{comment}{// Get specification for message to be created.}}
\DoxyCodeLine{14323         \mbox{\hyperlink{classcluon_1_1MetaMessage}{cluon::MetaMessage}} message\{\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\_scopeOfMetaMessages}}[messageIdentifier]\};}
\DoxyCodeLine{14324 }
\DoxyCodeLine{14325         \textcolor{comment}{// Create "{}empty"{} instance for the required message as GenericMessage.}}
\DoxyCodeLine{14326         \mbox{\hyperlink{classcluon_1_1GenericMessage}{cluon::GenericMessage}} gm;}
\DoxyCodeLine{14327         gm.\mbox{\hyperlink{classcluon_1_1GenericMessage_ad38acdbfe2d5ca936268d48d38fc7f6b}{createFrom}}(message, \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}});}
\DoxyCodeLine{14328 }
\DoxyCodeLine{14329         \textcolor{comment}{// Parse data from given JSON.}}
\DoxyCodeLine{14330         std::stringstream sstr\{json\};}
\DoxyCodeLine{14331         \mbox{\hyperlink{classcluon_1_1FromJSONVisitor}{cluon::FromJSONVisitor}} jsonDecoder;}
\DoxyCodeLine{14332         jsonDecoder.\mbox{\hyperlink{classcluon_1_1FromJSONVisitor_a3ed257ce39404ce76c9b9471ff7f6b46}{decodeFrom}}(sstr);}
\DoxyCodeLine{14333 }
\DoxyCodeLine{14334         \textcolor{comment}{// Set values in the newly created GenericMessage from JSONDecoder.}}
\DoxyCodeLine{14335         gm.\mbox{\hyperlink{classcluon_1_1GenericMessage_af29d39495dde7f0ef332fcf5df8cb22b}{accept}}(jsonDecoder);}
\DoxyCodeLine{14336 }
\DoxyCodeLine{14337         \textcolor{comment}{// Finally, transform GenericMessage into Envelope.}}
\DoxyCodeLine{14338         ToProtoVisitor protoEncoder;}
\DoxyCodeLine{14339         gm.\mbox{\hyperlink{classcluon_1_1GenericMessage_af29d39495dde7f0ef332fcf5df8cb22b}{accept}}(protoEncoder);}
\DoxyCodeLine{14340 }
\DoxyCodeLine{14341         \mbox{\hyperlink{classcluon_1_1data_1_1Envelope}{cluon::data::Envelope}} env;}
\DoxyCodeLine{14342         env.\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_abc59b3c43fef22b8d12bbce309a1504c}{dataType}}(messageIdentifier).\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a9b33bb1e804140e808a61a995278f82b}{serializedData}}(protoEncoder.encodedData()).\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a1f544425b7a692e748ea90abe54642e2}{senderStamp}}(senderStamp).\mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a6ca4f2516600faae6a166d109578c977}{sampleTimeStamp}}(sampleTimeStamp);}
\DoxyCodeLine{14343 }
\DoxyCodeLine{14344         \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}} = \mbox{\hyperlink{namespacecluon_a8ff42dcd356aa1d0ef8e41a8aa2bead2}{cluon::serializeEnvelope}}(std::move(env));}
\DoxyCodeLine{14345     \}}
\DoxyCodeLine{14346     \textcolor{keywordflow}{return} \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}};}
\DoxyCodeLine{14347 \}}

\end{DoxyCode}


References \mbox{\hyperlink{classcluon_1_1GenericMessage_af29d39495dde7f0ef332fcf5df8cb22b}{cluon\+::\+Generic\+Message\+::accept()}}, \mbox{\hyperlink{classcluon_1_1GenericMessage_ad38acdbfe2d5ca936268d48d38fc7f6b}{cluon\+::\+Generic\+Message\+::create\+From()}}, \mbox{\hyperlink{classcluon_1_1data_1_1Envelope_abc59b3c43fef22b8d12bbce309a1504c}{cluon\+::data\+::\+Envelope\+::data\+Type()}}, \mbox{\hyperlink{classcluon_1_1FromJSONVisitor_a3ed257ce39404ce76c9b9471ff7f6b46}{cluon\+::\+From\+JSONVisitor\+::decode\+From()}}, \mbox{\hyperlink{classcluon_1_1ToProtoVisitor_a20841380c5c8e865f30f92d164477e81}{cluon\+::\+To\+Proto\+Visitor\+::encoded\+Data()}}, \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{ret\+Val}}, \mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a6ca4f2516600faae6a166d109578c977}{cluon\+::data\+::\+Envelope\+::sample\+Time\+Stamp()}}, \mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a1f544425b7a692e748ea90abe54642e2}{cluon\+::data\+::\+Envelope\+::sender\+Stamp()}}, \mbox{\hyperlink{classcluon_1_1data_1_1Envelope_a9b33bb1e804140e808a61a995278f82b}{cluon\+::data\+::\+Envelope\+::serialized\+Data()}}, and \mbox{\hyperlink{namespacecluon_a8ff42dcd356aa1d0ef8e41a8aa2bead2}{cluon\+::serialize\+Envelope()}}.

Here is the call graph for this function\+:
% FIG 4
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_ab102d020ec1701c9e6b545f05f4dc6c8}\label{classcluon_1_1EnvelopeConverter_ab102d020ec1701c9e6b545f05f4dc6c8}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!getProtoEncodedEnvelopeFromJSONWithoutTimeStamps@{getProtoEncodedEnvelopeFromJSONWithoutTimeStamps}}
\index{getProtoEncodedEnvelopeFromJSONWithoutTimeStamps@{getProtoEncodedEnvelopeFromJSONWithoutTimeStamps}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{getProtoEncodedEnvelopeFromJSONWithoutTimeStamps()}{getProtoEncodedEnvelopeFromJSONWithoutTimeStamps()}}
{\footnotesize\ttfamily std\+::string cluon\+::\+Envelope\+Converter\+::get\+Proto\+Encoded\+Envelope\+From\+JSONWithout\+Time\+Stamps (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{json,  }\item[{int32\+\_\+t}]{message\+Identifier,  }\item[{uint32\+\_\+t}]{sender\+Stamp }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

This method transforms a given JSON representation into a Proto-\/encoded Envelope including the prepended OD4-\/header.


\begin{DoxyParams}{Parameters}
{\em json} & representation according to the given message specification. \\
\hline
{\em message\+Identifier} & The given JSON representation shall be interpreted as the specified message. \\
\hline
{\em sender\+Stamp} & to be used in the Envelope. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Proto-\/encoded Envelope including OD4-\/header or empty string. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{14306                                                                                                                                                                     \{}
\DoxyCodeLine{14307     \textcolor{comment}{// clang-\/format on}}
\DoxyCodeLine{14308     \textcolor{keywordflow}{return} \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a8416ac700d2c3c656260e2ea4b002397}{getProtoEncodedEnvelopeFromJSON}}(json, messageIdentifier, senderStamp, \mbox{\hyperlink{classcluon_1_1data_1_1TimeStamp}{cluon::data::TimeStamp}}());}
\DoxyCodeLine{14309 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_af7614f0f507b9407874d4fecd316006c}\label{classcluon_1_1EnvelopeConverter_af7614f0f507b9407874d4fecd316006c}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!operator=@{operator=}}
\index{operator=@{operator=}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \& cluon\+::\+Envelope\+Converter\+::operator= (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [delete]}}

\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a232227fe86e65d155f0ef12461224ba4}\label{classcluon_1_1EnvelopeConverter_a232227fe86e65d155f0ef12461224ba4}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!operator=@{operator=}}
\index{operator=@{operator=}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{operator=()}{operator=()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily \mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \& cluon\+::\+Envelope\+Converter\+::operator= (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classcluon_1_1EnvelopeConverter}{Envelope\+Converter}} \&\&}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}, {\ttfamily [delete]}}

\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_af4879d33814e727df61273fdd4ed973b}\label{classcluon_1_1EnvelopeConverter_af4879d33814e727df61273fdd4ed973b}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!setMessageSpecification@{setMessageSpecification}}
\index{setMessageSpecification@{setMessageSpecification}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{setMessageSpecification()}{setMessageSpecification()}}
{\footnotesize\ttfamily int32\+\_\+t cluon\+::\+Envelope\+Converter\+::set\+Message\+Specification (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{ms }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [noexcept]}}

This method sets the message specification to be used for interpreting a given Proto-\/encoded Envelope.


\begin{DoxyParams}{Parameters}
{\em ms} & Message specification following the ODVD format. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
-\/1 in case of invalid message specification; otherwise, number of successfully parsed messages from given message specification. 
\end{DoxyReturn}

\begin{DoxyCode}{0}
\DoxyCodeLine{14214                                                                                       \{}
\DoxyCodeLine{14215     int32\_t \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}}\{-\/1\};}
\DoxyCodeLine{14216 }
\DoxyCodeLine{14217     \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}}.clear();}
\DoxyCodeLine{14218     \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\_scopeOfMetaMessages}}.clear();}
\DoxyCodeLine{14219 }
\DoxyCodeLine{14220     \mbox{\hyperlink{classcluon_1_1MessageParser}{cluon::MessageParser}} mp;}
\DoxyCodeLine{14221     \textcolor{keyword}{auto} parsingResult = mp.\mbox{\hyperlink{classcluon_1_1MessageParser_a6ba94f0f1b6a790d8fe436ffa2512892}{parse}}(ms);}
\DoxyCodeLine{14222     \textcolor{keywordflow}{if} (cluon::MessageParser::MessageParserErrorCodes::NO\_MESSAGEPARSER\_ERROR == parsingResult.second) \{}
\DoxyCodeLine{14223         \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}} = parsingResult.first;}
\DoxyCodeLine{14224         \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} \&\mbox{\hyperlink{cluon-complete_8hpp_ac99d9adcdaabb55efe224341cde96631}{mm}} : \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}}) \{ \mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}{m\_scopeOfMetaMessages}}[\mbox{\hyperlink{cluon-complete_8hpp_ac99d9adcdaabb55efe224341cde96631}{mm}}.messageIdentifier()] = \mbox{\hyperlink{cluon-complete_8hpp_ac99d9adcdaabb55efe224341cde96631}{mm}}; \}}
\DoxyCodeLine{14225         \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}} = \textcolor{keyword}{static\_cast<}int32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}{m\_listOfMetaMessages}}.size());}
\DoxyCodeLine{14226     \}}
\DoxyCodeLine{14227     \textcolor{keywordflow}{return} \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{retVal}};}
\DoxyCodeLine{14228 \}}

\end{DoxyCode}


References \mbox{\hyperlink{cluon-complete_8hpp_ac99d9adcdaabb55efe224341cde96631}{mm}}, \mbox{\hyperlink{classcluon_1_1MessageParser_a6ba94f0f1b6a790d8fe436ffa2512892}{cluon\+::\+Message\+Parser\+::parse()}}, and \mbox{\hyperlink{cluon-complete_8hpp_ad4b02d239c8387bc0498b8a690ef5a16}{ret\+Val}}.

Here is the call graph for this function\+:
% FIG 5


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}\label{classcluon_1_1EnvelopeConverter_a7b613993f8398e4d978d8400fdd6dd98}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!m\_listOfMetaMessages@{m\_listOfMetaMessages}}
\index{m\_listOfMetaMessages@{m\_listOfMetaMessages}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{m\_listOfMetaMessages}{m\_listOfMetaMessages}}
{\footnotesize\ttfamily std\+::vector$<$\mbox{\hyperlink{classcluon_1_1MetaMessage}{cluon\+::\+Meta\+Message}}$>$ cluon\+::\+Envelope\+Converter\+::m\+\_\+list\+Of\+Meta\+Messages \{\}\hspace{0.3cm}{\ttfamily [private]}}

\mbox{\Hypertarget{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}\label{classcluon_1_1EnvelopeConverter_a6bbbe4d409c8ed29627a6f12a8abe9ac}} 
\index{cluon::EnvelopeConverter@{cluon::EnvelopeConverter}!m\_scopeOfMetaMessages@{m\_scopeOfMetaMessages}}
\index{m\_scopeOfMetaMessages@{m\_scopeOfMetaMessages}!cluon::EnvelopeConverter@{cluon::EnvelopeConverter}}
\doxysubsubsection{\texorpdfstring{m\_scopeOfMetaMessages}{m\_scopeOfMetaMessages}}
{\footnotesize\ttfamily std\+::map$<$int32\+\_\+t, \mbox{\hyperlink{classcluon_1_1MetaMessage}{cluon\+::\+Meta\+Message}}$>$ cluon\+::\+Envelope\+Converter\+::m\+\_\+scope\+Of\+Meta\+Messages \{\}\hspace{0.3cm}{\ttfamily [private]}}



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/\mbox{\hyperlink{cluon-complete_8hpp}{cluon-\/complete.\+hpp}}\end{DoxyCompactItemize}
