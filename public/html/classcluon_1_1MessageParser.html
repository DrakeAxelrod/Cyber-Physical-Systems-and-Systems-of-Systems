<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Cyphy: cluon::MessageParser Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Cyphy
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecluon.html">cluon</a></li><li class="navelem"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classcluon_1_1MessageParser-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">cluon::MessageParser Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="cluon-complete_8hpp_source.html">cluon-complete.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for cluon::MessageParser:</div>
<div class="dyncontent">
<div class="center"><img src="classcluon_1_1MessageParser__coll__graph.png" border="0" usemap="#acluon_1_1MessageParser_coll__map" alt="Collaboration graph"/></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a698df6fcdb26023a65160b21d1f8a50f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50f">MessageParserErrorCodes</a> : uint8_t { <a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50fa59e3e46042a543259967caae9c02d2bc">NO_MESSAGEPARSER_ERROR</a> = 0
, <a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50faa0952c82bf466b15bfa1fb6d25e21680">SYNTAX_ERROR</a> = 1
, <a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50fac6816d42d48737ff2a12c92cf4ed5111">DUPLICATE_IDENTIFIERS</a> = 2
 }</td></tr>
<tr class="separator:a698df6fcdb26023a65160b21d1f8a50f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6fdb52081e098c0f04d689a71329435d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a6fdb52081e098c0f04d689a71329435d">MessageParser</a> ()=default</td></tr>
<tr class="separator:a6fdb52081e098c0f04d689a71329435d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba94f0f1b6a790d8fe436ffa2512892"><td class="memItemLeft" align="right" valign="top">std::pair&lt; std::vector&lt; <a class="el" href="classcluon_1_1MetaMessage.html">MetaMessage</a> &gt;, <a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50f">MessageParserErrorCodes</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a6ba94f0f1b6a790d8fe436ffa2512892">parse</a> (const std::string &amp;input)</td></tr>
<tr class="separator:a6ba94f0f1b6a790d8fe436ffa2512892"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a2f6d42cb66c82cd29b6270ff22c2aa0f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a2f6d42cb66c82cd29b6270ff22c2aa0f">MessageParser</a> (const <a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;)=delete</td></tr>
<tr class="separator:a2f6d42cb66c82cd29b6270ff22c2aa0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f1aa033bef7ad0e271dd58450690d12"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a8f1aa033bef7ad0e271dd58450690d12">MessageParser</a> (<a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a8f1aa033bef7ad0e271dd58450690d12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8814f079b8bb9d0c2e527a41830d02f7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a8814f079b8bb9d0c2e527a41830d02f7">operator=</a> (const <a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;)=delete</td></tr>
<tr class="separator:a8814f079b8bb9d0c2e527a41830d02f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98e39a05f87a39ec3a9f40c068246a2d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcluon_1_1MessageParser.html#a98e39a05f87a39ec3a9f40c068246a2d">operator=</a> (<a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&amp;)=delete</td></tr>
<tr class="separator:a98e39a05f87a39ec3a9f40c068246a2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >This class provides a parser for message specifications in .odvd format. The format is inspired by Google Protobuf (<a href="https://developers.google.com/protocol-buffers/">https://developers.google.com/protocol-buffers/</a>) but simplified to enforce backwards and forwards compatibility next to numerical message identifiers.</p>
<p >This message specification format is also used by OpenDaVINCI (<a href="http://code.opendavinci.org">http://code.opendavinci.org</a>).</p>
<p >The parser is based on <a href="https://github.com/yhirose/cpp-peglib">https://github.com/yhirose/cpp-peglib</a>.</p>
<p >An example for a .odvd compliant message is demonstrated in the following:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> *spec = R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="stringliteral">message myMessage.SubName [id = 1] {</span></div>
<div class="line"><span class="stringliteral">    uint8 field1 [id = 1];</span></div>
<div class="line"><span class="stringliteral">    uint32 field2 [id = 2];</span></div>
<div class="line"><span class="stringliteral">    int64 field3 [id = 3];</span></div>
<div class="line"><span class="stringliteral">    string field4 [id = 4];</span></div>
<div class="line"><span class="stringliteral">}</span></div>
<div class="line"><span class="stringliteral">)&quot;;</span></div>
<div class="line"><span class="stringliteral"></span> </div>
<div class="line"><span class="stringliteral"><a class="code hl_class" href="classcluon_1_1MessageParser.html">cluon::MessageParser</a> mp;</span></div>
<div class="line"><span class="stringliteral"></span><span class="keyword">auto</span> <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> = mp.<a class="code hl_function" href="classcluon_1_1MessageParser.html#a6ba94f0f1b6a790d8fe436ffa2512892">parse</a>(std::string(spec));</div>
<div class="line"><span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>.second == cluon::MessageParser::MessageParserErrorCodes::NO_MESSAGEPARSER_ERROR) {</div>
<div class="line">    <span class="keyword">auto</span> listOfMessages = <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>.first;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keyword">auto</span> message : listOfMessages) {</div>
<div class="line">        message.accept([](<span class="keyword">const</span> <a class="code hl_class" href="classcluon_1_1MetaMessage.html">cluon::MetaMessage</a> &amp;<a class="code hl_variable" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>){ std::cout &lt;&lt; <span class="stringliteral">&quot;Message name = &quot;</span> &lt;&lt; <a class="code hl_variable" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>.messageName() &lt;&lt;</div>
<div class="line">std::endl; });</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="ttc" id="aclasscluon_1_1MessageParser_html"><div class="ttname"><a href="classcluon_1_1MessageParser.html">cluon::MessageParser</a></div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:6010</div></div>
<div class="ttc" id="aclasscluon_1_1MessageParser_html_a6ba94f0f1b6a790d8fe436ffa2512892"><div class="ttname"><a href="classcluon_1_1MessageParser.html#a6ba94f0f1b6a790d8fe436ffa2512892">cluon::MessageParser::parse</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; MetaMessage &gt;, MessageParserErrorCodes &gt; parse(const std::string &amp;input)</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:9572</div></div>
<div class="ttc" id="aclasscluon_1_1MetaMessage_html"><div class="ttname"><a href="classcluon_1_1MetaMessage.html">cluon::MetaMessage</a></div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:5777</div></div>
<div class="ttc" id="acluon-complete_8hpp_html_ac99d9adcdaabb55efe224341cde96631"><div class="ttname"><a href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a></div><div class="ttdeci">return mm</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:9825</div></div>
<div class="ttc" id="acluon-complete_8hpp_html_ad4b02d239c8387bc0498b8a690ef5a16"><div class="ttname"><a href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a></div><div class="ttdeci">std::pair&lt; std::vector&lt; MetaMessage &gt;, MessageParserErrorCodes &gt; retVal</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:9859</div></div>
</div><!-- fragment --> </div><h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a698df6fcdb26023a65160b21d1f8a50f" name="a698df6fcdb26023a65160b21d1f8a50f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a698df6fcdb26023a65160b21d1f8a50f">&#9670;&nbsp;</a></span>MessageParserErrorCodes</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50f">cluon::MessageParser::MessageParserErrorCodes</a> : uint8_t</td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a698df6fcdb26023a65160b21d1f8a50fa59e3e46042a543259967caae9c02d2bc" name="a698df6fcdb26023a65160b21d1f8a50fa59e3e46042a543259967caae9c02d2bc"></a>NO_MESSAGEPARSER_ERROR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a698df6fcdb26023a65160b21d1f8a50faa0952c82bf466b15bfa1fb6d25e21680" name="a698df6fcdb26023a65160b21d1f8a50faa0952c82bf466b15bfa1fb6d25e21680"></a>SYNTAX_ERROR&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a698df6fcdb26023a65160b21d1f8a50fac6816d42d48737ff2a12c92cf4ed5111" name="a698df6fcdb26023a65160b21d1f8a50fac6816d42d48737ff2a12c92cf4ed5111"></a>DUPLICATE_IDENTIFIERS&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno"> 6012</span>: uint8_t { <a class="code hl_enumvalue" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50fa59e3e46042a543259967caae9c02d2bc">NO_MESSAGEPARSER_ERROR</a> = 0, <a class="code hl_enumvalue" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50faa0952c82bf466b15bfa1fb6d25e21680">SYNTAX_ERROR</a> = 1, <a class="code hl_enumvalue" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50fac6816d42d48737ff2a12c92cf4ed5111">DUPLICATE_IDENTIFIERS</a> = 2 };</div>
<div class="ttc" id="aclasscluon_1_1MessageParser_html_a698df6fcdb26023a65160b21d1f8a50fa59e3e46042a543259967caae9c02d2bc"><div class="ttname"><a href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50fa59e3e46042a543259967caae9c02d2bc">cluon::MessageParser::NO_MESSAGEPARSER_ERROR</a></div><div class="ttdeci">@ NO_MESSAGEPARSER_ERROR</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:6012</div></div>
<div class="ttc" id="aclasscluon_1_1MessageParser_html_a698df6fcdb26023a65160b21d1f8a50faa0952c82bf466b15bfa1fb6d25e21680"><div class="ttname"><a href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50faa0952c82bf466b15bfa1fb6d25e21680">cluon::MessageParser::SYNTAX_ERROR</a></div><div class="ttdeci">@ SYNTAX_ERROR</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:6012</div></div>
<div class="ttc" id="aclasscluon_1_1MessageParser_html_a698df6fcdb26023a65160b21d1f8a50fac6816d42d48737ff2a12c92cf4ed5111"><div class="ttname"><a href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50fac6816d42d48737ff2a12c92cf4ed5111">cluon::MessageParser::DUPLICATE_IDENTIFIERS</a></div><div class="ttdeci">@ DUPLICATE_IDENTIFIERS</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:6012</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a2f6d42cb66c82cd29b6270ff22c2aa0f" name="a2f6d42cb66c82cd29b6270ff22c2aa0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f6d42cb66c82cd29b6270ff22c2aa0f">&#9670;&nbsp;</a></span>MessageParser() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cluon::MessageParser::MessageParser </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8f1aa033bef7ad0e271dd58450690d12" name="a8f1aa033bef7ad0e271dd58450690d12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f1aa033bef7ad0e271dd58450690d12">&#9670;&nbsp;</a></span>MessageParser() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cluon::MessageParser::MessageParser </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6fdb52081e098c0f04d689a71329435d" name="a6fdb52081e098c0f04d689a71329435d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fdb52081e098c0f04d689a71329435d">&#9670;&nbsp;</a></span>MessageParser() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">cluon::MessageParser::MessageParser </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a8814f079b8bb9d0c2e527a41830d02f7" name="a8814f079b8bb9d0c2e527a41830d02f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8814f079b8bb9d0c2e527a41830d02f7">&#9670;&nbsp;</a></span>operator=() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp; cluon::MessageParser::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a98e39a05f87a39ec3a9f40c068246a2d" name="a98e39a05f87a39ec3a9f40c068246a2d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98e39a05f87a39ec3a9f40c068246a2d">&#9670;&nbsp;</a></span>operator=() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp; cluon::MessageParser::operator= </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classcluon_1_1MessageParser.html">MessageParser</a> &amp;&amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a6ba94f0f1b6a790d8fe436ffa2512892" name="a6ba94f0f1b6a790d8fe436ffa2512892"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba94f0f1b6a790d8fe436ffa2512892">&#9670;&nbsp;</a></span>parse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; std::vector&lt; <a class="el" href="classcluon_1_1MetaMessage.html">MetaMessage</a> &gt;, <a class="el" href="classcluon_1_1MessageParser.html#a698df6fcdb26023a65160b21d1f8a50f">MessageParser::MessageParserErrorCodes</a> &gt; cluon::MessageParser::parse </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>input</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p >This method tries to parse the given message specification.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">input</td><td>Message specification. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pair: List of cluon::MetaMessages describing the specified messages and error code: NO_MESSAGEPARSER_ERROR: The given specification could be parsed successfully (list moght be non-empty). SYNTAX_ERROR: The given specification could not be parsed successfully (list is empty). DUPLICATE_IDENTIFIERS: The given specification contains ambiguous names or identifiers (list is empty). </dd></dl>
<div class="fragment"><div class="line"><span class="lineno"> 9572</span>                                                                                                                        {</div>
<div class="line"><span class="lineno"> 9573</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *grammarMessageSpecificationLanguage = R<span class="stringliteral">&quot;(</span></div>
<div class="line"><span class="lineno"> 9574</span><span class="stringliteral">        MESSAGES_SPECIFICATION      &lt;- PACKAGE_DECLARATION? MESSAGE_DECLARATION*</span></div>
<div class="line"><span class="lineno"> 9575</span><span class="stringliteral">        PACKAGE_DECLARATION         &lt;- &#39;package&#39; PACKAGE_IDENTIFIER &#39;;&#39;</span></div>
<div class="line"><span class="lineno"> 9576</span><span class="stringliteral">        PACKAGE_IDENTIFIER          &lt;- &lt; IDENTIFIER (&#39;.&#39; IDENTIFIER)* &gt;</span></div>
<div class="line"><span class="lineno"> 9577</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9578</span><span class="stringliteral">        MESSAGE_DECLARATION         &lt;- &#39;message&#39; MESSAGE_IDENTIFIER MESSAGE_OPTIONS &#39;{&#39; FIELD* &#39;}&#39;</span></div>
<div class="line"><span class="lineno"> 9579</span><span class="stringliteral">        MESSAGE_IDENTIFIER          &lt;- &lt; IDENTIFIER (&#39;.&#39; IDENTIFIER)* &gt;</span></div>
<div class="line"><span class="lineno"> 9580</span><span class="stringliteral">        MESSAGE_OPTIONS             &lt;- &#39;[&#39; &#39;id&#39; &#39;=&#39; NATURAL_NUMBER &#39;,&#39;? &#39;]&#39;</span></div>
<div class="line"><span class="lineno"> 9581</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9582</span><span class="stringliteral">        FIELD                       &lt;- PRIMITIVE_FIELD</span></div>
<div class="line"><span class="lineno"> 9583</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9584</span><span class="stringliteral">        PRIMITIVE_FIELD             &lt;- PRIMITIVE_TYPE IDENTIFIER (&#39;[&#39; PRIMITIVE_FIELD_OPTIONS &#39;]&#39;)? &#39;;&#39;</span></div>
<div class="line"><span class="lineno"> 9585</span><span class="stringliteral">        PRIMITIVE_FIELD_OPTIONS     &lt;- PRIMITIVE_FIELD_DEFAULT? &#39;,&#39;? NUMERICAL_FIELD_IDENTIFIER?</span></div>
<div class="line"><span class="lineno"> 9586</span><span class="stringliteral">        NUMERICAL_FIELD_IDENTIFIER  &lt;- &#39;id&#39; &#39;=&#39; NATURAL_NUMBER</span></div>
<div class="line"><span class="lineno"> 9587</span><span class="stringliteral">        PRIMITIVE_FIELD_DEFAULT     &lt;- &#39;default&#39; &#39;=&#39; (FLOAT_NUMBER / BOOL / CHARACTER / STRING)</span></div>
<div class="line"><span class="lineno"> 9588</span><span class="stringliteral">        PRIMITIVE_TYPE              &lt;- &lt; &#39;bool&#39; / &#39;float&#39; / &#39;double&#39; /</span></div>
<div class="line"><span class="lineno"> 9589</span><span class="stringliteral">                                         &#39;char&#39; /</span></div>
<div class="line"><span class="lineno"> 9590</span><span class="stringliteral">                                         &#39;bytes&#39; / &#39;string&#39; /</span></div>
<div class="line"><span class="lineno"> 9591</span><span class="stringliteral">                                         &#39;int8&#39; / &#39;uint8&#39; / </span></div>
<div class="line"><span class="lineno"> 9592</span><span class="stringliteral">                                         &#39;int16&#39; / &#39;uint16&#39; / </span></div>
<div class="line"><span class="lineno"> 9593</span><span class="stringliteral">                                         &#39;int32&#39; / &#39;uint32&#39; / </span></div>
<div class="line"><span class="lineno"> 9594</span><span class="stringliteral">                                         &#39;int64&#39; / &#39;uint64&#39; /</span></div>
<div class="line"><span class="lineno"> 9595</span><span class="stringliteral">                                         MESSAGE_TYPE &gt;</span></div>
<div class="line"><span class="lineno"> 9596</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9597</span><span class="stringliteral">        MESSAGE_TYPE                &lt;- &lt; IDENTIFIER (&#39;.&#39; IDENTIFIER)* &gt;</span></div>
<div class="line"><span class="lineno"> 9598</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9599</span><span class="stringliteral">        IDENTIFIER                  &lt;- &lt; [a-zA-Z][a-zA-Z0-9_]* &gt;</span></div>
<div class="line"><span class="lineno"> 9600</span><span class="stringliteral">        DIGIT                       &lt;- &lt; [0-9] &gt;</span></div>
<div class="line"><span class="lineno"> 9601</span><span class="stringliteral">        NATURAL_NUMBER              &lt;- &lt; [1-9] DIGIT* &gt;</span></div>
<div class="line"><span class="lineno"> 9602</span><span class="stringliteral">        FLOAT_NUMBER                &lt;- &lt; (&#39;+&#39; / &#39;-&#39;)? DIGIT DIGIT* ((&#39;.&#39;) DIGIT*)? &gt;</span></div>
<div class="line"><span class="lineno"> 9603</span><span class="stringliteral">        BOOL                        &lt;- &lt; &#39;true&#39; &gt; / &lt; &#39;false&#39; &gt;</span></div>
<div class="line"><span class="lineno"> 9604</span><span class="stringliteral">        STRING                      &lt;- &#39;&quot;&#39; &lt; (!&#39;&quot;&#39;.)* &gt; &#39;&quot;&#39;</span></div>
<div class="line"><span class="lineno"> 9605</span><span class="stringliteral">        CHARACTER                   &lt;- &#39;\&#39;&#39; &lt; (!&#39;\&#39;&#39; .) &gt; &#39;\&#39;&#39;</span></div>
<div class="line"><span class="lineno"> 9606</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9607</span><span class="stringliteral">        %whitespace                 &lt;- [ \t\r\n]*</span></div>
<div class="line"><span class="lineno"> 9608</span><span class="stringliteral">    )&quot;;</span></div>
<div class="line"><span class="lineno"> 9609</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9611</span><span class="stringliteral"></span> </div>
<div class="line"><span class="lineno"> 9612</span><span class="stringliteral">    </span><span class="comment">// Function to check for unique field names.</span></div>
<div class="line"><span class="lineno"> 9613</span>    std::function&lt;bool(<span class="keyword">const</span> <a class="code hl_struct" href="structpeg_1_1AstBase.html">peg::Ast</a> &amp;, std::string &amp;, std::vector&lt;std::string&gt; &amp;, std::vector&lt;std::string&gt; &amp;, std::vector&lt;int32_t&gt; &amp;, std::vector&lt;int32_t&gt; &amp;)&gt;</div>
<div class="line"><span class="lineno"> 9614</span>        check4UniqueFieldNames = [&amp;checkForUniqueFieldNames = check4UniqueFieldNames](<span class="keyword">const</span> <a class="code hl_struct" href="structpeg_1_1AstBase.html">peg::Ast</a> &amp;<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>,</div>
<div class="line"><span class="lineno"> 9615</span>                                                                                      std::string &amp;prefix,</div>
<div class="line"><span class="lineno"> 9616</span>                                                                                      std::vector&lt;std::string&gt; &amp;messageNames,</div>
<div class="line"><span class="lineno"> 9617</span>                                                                                      std::vector&lt;std::string&gt; &amp;fieldNames,</div>
<div class="line"><span class="lineno"> 9618</span>                                                                                      std::vector&lt;int32_t&gt; &amp;numericalMessageIdentifiers,</div>
<div class="line"><span class="lineno"> 9619</span>                                                                                      std::vector&lt;int32_t&gt; &amp;numericalFieldIdentifiers) {</div>
<div class="line"><span class="lineno"> 9620</span>            <span class="keywordtype">bool</span> <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 9621</span>            <span class="comment">// First, we need to visit the children of AST node MESSAGES_SPECIFICATION.</span></div>
<div class="line"><span class="lineno"> 9622</span>            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;MESSAGES_SPECIFICATION&quot;</span> == <a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.name) {</div>
<div class="line"><span class="lineno"> 9623</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;node : <a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes) {</div>
<div class="line"><span class="lineno"> 9624</span>                    <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= checkForUniqueFieldNames(*node, prefix, messageNames, fieldNames, numericalMessageIdentifiers, numericalFieldIdentifiers);</div>
<div class="line"><span class="lineno"> 9625</span>                }</div>
<div class="line"><span class="lineno"> 9626</span>                <span class="comment">// Try finding duplicated message identifiers.</span></div>
<div class="line"><span class="lineno"> 9627</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9628</span>                    std::sort(std::begin(numericalMessageIdentifiers), std::end(numericalMessageIdentifiers));</div>
<div class="line"><span class="lineno"> 9629</span>                    int32_t duplicatedMessageIdentifier{-1};</div>
<div class="line"><span class="lineno"> 9630</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it{std::begin(numericalMessageIdentifiers)}; it != std::end(numericalMessageIdentifiers); it++) {</div>
<div class="line"><span class="lineno"> 9631</span>                        <span class="keywordflow">if</span> (it + 1 != std::end(numericalMessageIdentifiers)) {</div>
<div class="line"><span class="lineno"> 9632</span>                            <span class="keywordflow">if</span> (std::find(it + 1, std::end(numericalMessageIdentifiers), *it) != std::end(numericalMessageIdentifiers)) {</div>
<div class="line"><span class="lineno"> 9633</span>                                duplicatedMessageIdentifier = *it;</div>
<div class="line"><span class="lineno"> 9634</span>                            }</div>
<div class="line"><span class="lineno"> 9635</span>                        }</div>
<div class="line"><span class="lineno"> 9636</span>                    }</div>
<div class="line"><span class="lineno"> 9637</span>                    <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= (-1 == duplicatedMessageIdentifier);</div>
<div class="line"><span class="lineno"> 9638</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9639</span>                        std::cerr &lt;&lt; <span class="stringliteral">&quot;[cluon::MessageParser] Found duplicated numerical message identifier: &quot;</span> &lt;&lt; duplicatedMessageIdentifier &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno"> 9640</span>                    }</div>
<div class="line"><span class="lineno"> 9641</span>                }</div>
<div class="line"><span class="lineno"> 9642</span>                <span class="comment">// Try finding duplicated message names.</span></div>
<div class="line"><span class="lineno"> 9643</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9644</span>                    std::sort(std::begin(messageNames), std::end(messageNames));</div>
<div class="line"><span class="lineno"> 9645</span>                    std::string duplicatedMessageName;</div>
<div class="line"><span class="lineno"> 9646</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it{std::begin(messageNames)}; it != std::end(messageNames); it++) {</div>
<div class="line"><span class="lineno"> 9647</span>                        <span class="keywordflow">if</span> (it + 1 != std::end(messageNames)) {</div>
<div class="line"><span class="lineno"> 9648</span>                            <span class="keywordflow">if</span> (std::find(it + 1, std::end(messageNames), *it) != std::end(messageNames)) {</div>
<div class="line"><span class="lineno"> 9649</span>                                duplicatedMessageName = *it;</div>
<div class="line"><span class="lineno"> 9650</span>                            }</div>
<div class="line"><span class="lineno"> 9651</span>                        }</div>
<div class="line"><span class="lineno"> 9652</span>                    }</div>
<div class="line"><span class="lineno"> 9653</span>                    <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= (duplicatedMessageName.empty());</div>
<div class="line"><span class="lineno"> 9654</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9655</span>                        std::cerr &lt;&lt; <span class="stringliteral">&quot;[cluon::MessageParser] Found duplicated message name &#39;&quot;</span> &lt;&lt; duplicatedMessageName &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno"> 9656</span>                    }</div>
<div class="line"><span class="lineno"> 9657</span>                }</div>
<div class="line"><span class="lineno"> 9658</span>            }</div>
<div class="line"><span class="lineno"> 9659</span>            <span class="comment">// Second, we need to visit the children of AST node MESSAGE_DECLARATION.</span></div>
<div class="line"><span class="lineno"> 9660</span>            <span class="keywordflow">if</span> (<span class="stringliteral">&quot;MESSAGE_DECLARATION&quot;</span> == <a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.name) {</div>
<div class="line"><span class="lineno"> 9661</span>                fieldNames.clear();</div>
<div class="line"><span class="lineno"> 9662</span>                numericalFieldIdentifiers.clear();</div>
<div class="line"><span class="lineno"> 9663</span>                prefix = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 9664</span>                <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 9665</span> </div>
<div class="line"><span class="lineno"> 9666</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;node : <a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes) {</div>
<div class="line"><span class="lineno"> 9667</span>                    <span class="keywordflow">if</span> (<span class="stringliteral">&quot;MESSAGE_IDENTIFIER&quot;</span> == node-&gt;name) {</div>
<div class="line"><span class="lineno"> 9668</span>                        prefix = node-&gt;token;</div>
<div class="line"><span class="lineno"> 9669</span>                        messageNames.push_back(<a class="code hl_function" href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">::stringtoolbox::trim</a>(prefix));</div>
<div class="line"><span class="lineno"> 9670</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;NATURAL_NUMBER&quot;</span> == node-&gt;name) {</div>
<div class="line"><span class="lineno"> 9671</span>                        numericalMessageIdentifiers.push_back(std::stoi(node-&gt;token));</div>
<div class="line"><span class="lineno"> 9672</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;PRIMITIVE_FIELD&quot;</span> == node-&gt;name) {</div>
<div class="line"><span class="lineno"> 9673</span>                        <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= checkForUniqueFieldNames(*node, prefix, messageNames, fieldNames, numericalMessageIdentifiers, numericalFieldIdentifiers);</div>
<div class="line"><span class="lineno"> 9674</span>                    }</div>
<div class="line"><span class="lineno"> 9675</span>                }</div>
<div class="line"><span class="lineno"> 9676</span> </div>
<div class="line"><span class="lineno"> 9677</span>                <span class="comment">// Try finding duplicated numerical field identifiers.</span></div>
<div class="line"><span class="lineno"> 9678</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9679</span>                    std::sort(std::begin(numericalFieldIdentifiers), std::end(numericalFieldIdentifiers));</div>
<div class="line"><span class="lineno"> 9680</span>                    int32_t duplicatedFieldIdentifier{-1};</div>
<div class="line"><span class="lineno"> 9681</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it{std::begin(numericalFieldIdentifiers)}; it != std::end(numericalFieldIdentifiers); it++) {</div>
<div class="line"><span class="lineno"> 9682</span>                        <span class="keywordflow">if</span> (it + 1 != std::end(numericalFieldIdentifiers)) {</div>
<div class="line"><span class="lineno"> 9683</span>                            <span class="keywordflow">if</span> (std::find(it + 1, std::end(numericalFieldIdentifiers), *it) != std::end(numericalFieldIdentifiers)) {</div>
<div class="line"><span class="lineno"> 9684</span>                                duplicatedFieldIdentifier = *it;</div>
<div class="line"><span class="lineno"> 9685</span>                            }</div>
<div class="line"><span class="lineno"> 9686</span>                        }</div>
<div class="line"><span class="lineno"> 9687</span>                    }</div>
<div class="line"><span class="lineno"> 9688</span>                    <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= (-1 == duplicatedFieldIdentifier);</div>
<div class="line"><span class="lineno"> 9689</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9690</span>                        std::cerr &lt;&lt; <span class="stringliteral">&quot;[cluon::MessageParser] Found duplicated numerical field identifier in message &quot;</span></div>
<div class="line"><span class="lineno"> 9691</span>                                  &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; <a class="code hl_function" href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">::stringtoolbox::trim</a>(prefix) &lt;&lt; <span class="stringliteral">&quot;&#39;: &quot;</span> &lt;&lt; duplicatedFieldIdentifier &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno"> 9692</span>                    }</div>
<div class="line"><span class="lineno"> 9693</span>                }</div>
<div class="line"><span class="lineno"> 9694</span>                <span class="comment">// Try finding duplicated field names.</span></div>
<div class="line"><span class="lineno"> 9695</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9696</span>                    std::sort(std::begin(fieldNames), std::end(fieldNames));</div>
<div class="line"><span class="lineno"> 9697</span>                    std::string duplicatedFieldName;</div>
<div class="line"><span class="lineno"> 9698</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span> it{std::begin(fieldNames)}; it != std::end(fieldNames); it++) {</div>
<div class="line"><span class="lineno"> 9699</span>                        <span class="keywordflow">if</span> (it + 1 != std::end(fieldNames)) {</div>
<div class="line"><span class="lineno"> 9700</span>                            <span class="keywordflow">if</span> (std::find(it + 1, std::end(fieldNames), *it) != std::end(fieldNames)) {</div>
<div class="line"><span class="lineno"> 9701</span>                                duplicatedFieldName = *it;</div>
<div class="line"><span class="lineno"> 9702</span>                            }</div>
<div class="line"><span class="lineno"> 9703</span>                        }</div>
<div class="line"><span class="lineno"> 9704</span>                    }</div>
<div class="line"><span class="lineno"> 9705</span>                    <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= (duplicatedFieldName.empty());</div>
<div class="line"><span class="lineno"> 9706</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>) {</div>
<div class="line"><span class="lineno"> 9707</span>                        std::cerr &lt;&lt; <span class="stringliteral">&quot;[cluon::MessageParser] Found duplicated field name in message &#39;&quot;</span> &lt;&lt; <a class="code hl_function" href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">::stringtoolbox::trim</a>(prefix) &lt;&lt; <span class="stringliteral">&quot;&#39;: &#39;&quot;</span></div>
<div class="line"><span class="lineno"> 9708</span>                                  &lt;&lt; duplicatedFieldName &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><span class="lineno"> 9709</span>                    }</div>
<div class="line"><span class="lineno"> 9710</span>                }</div>
<div class="line"><span class="lineno"> 9711</span>            }</div>
<div class="line"><span class="lineno"> 9712</span>            <span class="comment">// Within AST node MESSAGE_DECLARATION, we have PRIMITIVE_FIELD from</span></div>
<div class="line"><span class="lineno"> 9713</span>            <span class="comment">// which we need to extract the field &quot;token&quot;.</span></div>
<div class="line"><span class="lineno"> 9714</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.name == <span class="stringliteral">&quot;PRIMITIVE_FIELD&quot;</span>) {</div>
<div class="line"><span class="lineno"> 9715</span>                <span class="comment">// Extract the value of entry &quot;IDENTIFIER&quot;.</span></div>
<div class="line"><span class="lineno"> 9716</span>                <span class="keyword">auto</span> nodeIdentifier = std::find_if(std::begin(<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes), std::end(<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes), [](<span class="keyword">auto</span> a) { return (a-&gt;name == <span class="stringliteral">&quot;IDENTIFIER&quot;</span>); });</div>
<div class="line"><span class="lineno"> 9717</span>                <span class="keywordflow">if</span> (nodeIdentifier != std::end(<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes)) {</div>
<div class="line"><span class="lineno"> 9718</span>                    fieldNames.push_back((*nodeIdentifier)-&gt;token);</div>
<div class="line"><span class="lineno"> 9719</span>                }</div>
<div class="line"><span class="lineno"> 9720</span> </div>
<div class="line"><span class="lineno"> 9721</span>                <span class="comment">// Visit this node&#39;s children to check for duplicated numerical identifiers.</span></div>
<div class="line"><span class="lineno"> 9722</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;node : <a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes) {</div>
<div class="line"><span class="lineno"> 9723</span>                    <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a> &amp;= checkForUniqueFieldNames(*node, prefix, messageNames, fieldNames, numericalMessageIdentifiers, numericalFieldIdentifiers);</div>
<div class="line"><span class="lineno"> 9724</span>                }</div>
<div class="line"><span class="lineno"> 9725</span>            }</div>
<div class="line"><span class="lineno"> 9726</span>            <span class="comment">// Within AST node PRIMITIVE_FIELD, we have PRIMITIVE_FIELD_OPTIONS from</span></div>
<div class="line"><span class="lineno"> 9727</span>            <span class="comment">// which we need to extract the field &quot;token&quot;.</span></div>
<div class="line"><span class="lineno"> 9728</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.name == <span class="stringliteral">&quot;PRIMITIVE_FIELD_OPTIONS&quot;</span>) {</div>
<div class="line"><span class="lineno"> 9729</span>                <span class="comment">// Extract the value of entry &quot;IDENTIFIER&quot;.</span></div>
<div class="line"><span class="lineno"> 9730</span>                <span class="keyword">auto</span> nodeNumericalFieldIdentifier</div>
<div class="line"><span class="lineno"> 9731</span>                    = std::find_if(std::begin(<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes), std::end(<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes), [](<span class="keyword">auto</span> a) { return (a-&gt;name == <span class="stringliteral">&quot;NATURAL_NUMBER&quot;</span>); });</div>
<div class="line"><span class="lineno"> 9732</span>                <span class="keywordflow">if</span> (nodeNumericalFieldIdentifier != std::end(<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>.nodes)) {</div>
<div class="line"><span class="lineno"> 9733</span>                    numericalFieldIdentifiers.push_back(std::stoi((*nodeNumericalFieldIdentifier)-&gt;token));</div>
<div class="line"><span class="lineno"> 9734</span>                }</div>
<div class="line"><span class="lineno"> 9735</span>            }</div>
<div class="line"><span class="lineno"> 9736</span> </div>
<div class="line"><span class="lineno"> 9737</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>;</div>
<div class="line"><span class="lineno"> 9738</span>        };</div>
<div class="line"><span class="lineno"> 9739</span> </div>
<div class="line"><span class="lineno"> 9741</span> </div>
<div class="line"><span class="lineno"> 9742</span>    <span class="comment">// Function to transform AST into list of MetaMessages.</span></div>
<div class="line"><span class="lineno"> 9743</span>    std::function&lt;void(<span class="keyword">const</span> <a class="code hl_struct" href="structpeg_1_1AstBase.html">peg::Ast</a> &amp;, std::vector&lt;MetaMessage&gt; &amp;)&gt; transform2MetaMessages</div>
<div class="line"><span class="lineno"> 9744</span>        = [](<span class="keyword">const</span> <a class="code hl_struct" href="structpeg_1_1AstBase.html">peg::Ast</a> &amp;<a class="code hl_variable" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>, std::vector&lt;MetaMessage&gt; &amp;listOfMetaMessages) {</div>
<div class="line"><span class="lineno"> 9745</span>              <span class="comment">// &quot;Inner&quot;-lambda to handle various types of message declarations.</span></div>
<div class="line"><span class="lineno"> 9746</span>              <span class="keyword">auto</span> createMetaMessage = [](<span class="keyword">const</span> <a class="code hl_struct" href="structpeg_1_1AstBase.html">peg::Ast</a> &amp;_node, std::string _packageName) -&gt; MetaMessage {</div>
<div class="line"><span class="lineno"> 9747</span>                  MetaMessage <a class="code hl_variable" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>;</div>
<div class="line"><span class="lineno"> 9748</span>                  <a class="code hl_variable" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>.packageName(<a class="code hl_function" href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">::stringtoolbox::trim</a>(_packageName));</div>
<div class="line"><span class="lineno"> 9749</span>                  uint32_t fieldIdentifierCounter{0};</div>
<div class="line"><span class="lineno"> 9750</span>                  <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;e : _node.<a class="code hl_variable" href="structpeg_1_1AstBase.html#a7a04cf80fb70e201405f8f40138ee2a7">nodes</a>) {</div>
<div class="line"><span class="lineno"> 9751</span>                      <span class="keywordflow">if</span> (<span class="stringliteral">&quot;MESSAGE_IDENTIFIER&quot;</span> == e-&gt;name) {</div>
<div class="line"><span class="lineno"> 9752</span>                          std::string _messageName = e-&gt;token;</div>
<div class="line"><span class="lineno"> 9753</span>                          <a class="code hl_variable" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>.messageName(<a class="code hl_function" href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">::stringtoolbox::trim</a>(_messageName));</div>
<div class="line"><span class="lineno"> 9754</span>                      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;NATURAL_NUMBER&quot;</span> == e-&gt;name) {</div>
<div class="line"><span class="lineno"> 9755</span>                          <a class="code hl_variable" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>.messageIdentifier(std::stoi(e-&gt;token));</div>
<div class="line"><span class="lineno"> 9756</span>                      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;PRIMITIVE_FIELD&quot;</span> == e-&gt;name) {</div>
<div class="line"><span class="lineno"> 9757</span>                          std::string _fieldName;</div>
<div class="line"><span class="lineno"> 9758</span>                          <span class="keyword">auto</span> <a class="code hl_function" href="cluon-complete_8hpp.html#a802637a7125c84855ce97b387f786538">fieldName</a> = std::find_if(std::begin(e-&gt;nodes), std::end(e-&gt;nodes), [](<span class="keyword">auto</span> a) { return (a-&gt;name == <span class="stringliteral">&quot;IDENTIFIER&quot;</span>); });</div>
<div class="line"><span class="lineno"> 9759</span>                          <span class="keywordflow">if</span> (<a class="code hl_function" href="cluon-complete_8hpp.html#a802637a7125c84855ce97b387f786538">fieldName</a> != std::end(e-&gt;nodes)) {</div>
<div class="line"><span class="lineno"> 9760</span>                              _fieldName = (*fieldName)-&gt;token;</div>
<div class="line"><span class="lineno"> 9761</span>                          }</div>
<div class="line"><span class="lineno"> 9762</span> </div>
<div class="line"><span class="lineno"> 9763</span>                          std::string _fieldDataType;</div>
<div class="line"><span class="lineno"> 9764</span>                          <span class="keyword">auto</span> fieldDataType = std::find_if(std::begin(e-&gt;nodes), std::end(e-&gt;nodes), [](<span class="keyword">auto</span> a) { return (a-&gt;name == <span class="stringliteral">&quot;PRIMITIVE_TYPE&quot;</span>); });</div>
<div class="line"><span class="lineno"> 9765</span>                          <span class="keywordflow">if</span> (fieldDataType != std::end(e-&gt;nodes)) {</div>
<div class="line"><span class="lineno"> 9766</span>                              _fieldDataType = (*fieldDataType)-&gt;token;</div>
<div class="line"><span class="lineno"> 9767</span>                          }</div>
<div class="line"><span class="lineno"> 9768</span> </div>
<div class="line"><span class="lineno"> 9769</span>                          fieldIdentifierCounter++; <span class="comment">// Automatically count expected field identifiers in case of missing</span></div>
<div class="line"><span class="lineno"> 9770</span>                                                    <span class="comment">// field options.</span></div>
<div class="line"><span class="lineno"> 9771</span>                          std::string _fieldIdentifier;</div>
<div class="line"><span class="lineno"> 9772</span>                          <span class="keyword">auto</span> <a class="code hl_function" href="cluon-complete_8hpp.html#afab98cfce6f426b1a7deea4ca827a245">fieldIdentifier</a> = std::find_if(std::begin(e-&gt;nodes), std::end(e-&gt;nodes), [](<span class="keyword">auto</span> a) { return (a-&gt;name == <span class="stringliteral">&quot;NATURAL_NUMBER&quot;</span>); });</div>
<div class="line"><span class="lineno"> 9773</span>                          <span class="keywordflow">if</span> (<a class="code hl_function" href="cluon-complete_8hpp.html#afab98cfce6f426b1a7deea4ca827a245">fieldIdentifier</a> != std::end(e-&gt;nodes)) {</div>
<div class="line"><span class="lineno"> 9774</span>                              _fieldIdentifier = (*fieldIdentifier)-&gt;token;</div>
<div class="line"><span class="lineno"> 9775</span>                          }</div>
<div class="line"><span class="lineno"> 9776</span> </div>
<div class="line"><span class="lineno"> 9777</span>                          std::string _fieldDefaultInitializerValue;</div>
<div class="line"><span class="lineno"> 9778</span>                          <span class="keyword">auto</span> primitiveFieldOptions</div>
<div class="line"><span class="lineno"> 9779</span>                              = std::find_if(std::begin(e-&gt;nodes), std::end(e-&gt;nodes), [](<span class="keyword">auto</span> a) { return (a-&gt;name == <span class="stringliteral">&quot;PRIMITIVE_FIELD_OPTIONS&quot;</span>); });</div>
<div class="line"><span class="lineno"> 9780</span>                          <span class="keywordflow">if</span> (primitiveFieldOptions != std::end(e-&gt;nodes)) {</div>
<div class="line"><span class="lineno"> 9781</span>                              <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span> &amp;f : (*primitiveFieldOptions)-&gt;nodes) {</div>
<div class="line"><span class="lineno"> 9782</span>                                  <span class="keywordflow">if</span> (<span class="stringliteral">&quot;NATURAL_NUMBER&quot;</span> != f-&gt;name) {</div>
<div class="line"><span class="lineno"> 9783</span>                                      <span class="keywordflow">if</span> (<span class="stringliteral">&quot;STRING&quot;</span> == f-&gt;name) {</div>
<div class="line"><span class="lineno"> 9784</span>                                          _fieldDefaultInitializerValue = <span class="stringliteral">&quot;\&quot;&quot;</span> + f-&gt;token + <span class="stringliteral">&quot;\&quot;&quot;</span>; <span class="comment">// NOLINT</span></div>
<div class="line"><span class="lineno"> 9785</span>                                      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="stringliteral">&quot;CHARACTER&quot;</span> == f-&gt;name) {</div>
<div class="ttc" id="acluon-complete_8hpp_html_a802637a7125c84855ce97b387f786538"><div class="ttname"><a href="cluon-complete_8hpp.html#a802637a7125c84855ce97b387f786538">fieldName</a></div><div class="ttdeci">mf fieldName(::stringtoolbox::trim(_fieldName))</div></div>
<div class="ttc" id="acluon-complete_8hpp_html_a92e4261a46b1f5265ae122a3e8643667"><div class="ttname"><a href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a></div><div class="ttdeci">std::shared_ptr&lt; peg::Ast &gt; ast</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:9869</div></div>
<div class="ttc" id="acluon-complete_8hpp_html_afab98cfce6f426b1a7deea4ca827a245"><div class="ttname"><a href="cluon-complete_8hpp.html#afab98cfce6f426b1a7deea4ca827a245">fieldIdentifier</a></div><div class="ttdeci">mf fieldIdentifier((!_fieldIdentifier.empty() ? static_cast&lt; uint32_t &gt;(std::stoi(::stringtoolbox::trim(_fieldIdentifier))) :fieldIdentifierCounter))</div></div>
<div class="ttc" id="anamespacestringtoolbox_html_a96eeb4e50ddaab510b51a18071deb6f4"><div class="ttname"><a href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">stringtoolbox::trim</a></div><div class="ttdeci">std::string &amp; trim(std::string &amp;str) noexcept</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:5463</div></div>
<div class="ttc" id="astructpeg_1_1AstBase_html"><div class="ttname"><a href="structpeg_1_1AstBase.html">peg::AstBase</a></div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:3466</div></div>
<div class="ttc" id="astructpeg_1_1AstBase_html_a7a04cf80fb70e201405f8f40138ee2a7"><div class="ttname"><a href="structpeg_1_1AstBase.html#a7a04cf80fb70e201405f8f40138ee2a7">peg::AstBase::nodes</a></div><div class="ttdeci">std::vector&lt; std::shared_ptr&lt; AstBase&lt; Annotation &gt; &gt; &gt; nodes</div><div class="ttdef"><b>Definition:</b> cluon-complete.hpp:3557</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="cluon-complete_8hpp.html#a92e4261a46b1f5265ae122a3e8643667">ast</a>, <a class="el" href="cluon-complete_8hpp.html#afab98cfce6f426b1a7deea4ca827a245">fieldIdentifier()</a>, <a class="el" href="cluon-complete_8hpp.html#a802637a7125c84855ce97b387f786538">fieldName()</a>, <a class="el" href="cluon-complete_8hpp.html#ac99d9adcdaabb55efe224341cde96631">mm</a>, <a class="el" href="structpeg_1_1AstBase.html#a7a04cf80fb70e201405f8f40138ee2a7">peg::AstBase&lt; Annotation &gt;::nodes</a>, <a class="el" href="cluon-complete_8hpp.html#ad4b02d239c8387bc0498b8a690ef5a16">retVal</a>, and <a class="el" href="namespacestringtoolbox.html#a96eeb4e50ddaab510b51a18071deb6f4">stringtoolbox::trim()</a>.</p>

<p class="reference">Referenced by <a class="el" href="classcluon_1_1EnvelopeConverter.html#af4879d33814e727df61273fdd4ed973b">cluon::EnvelopeConverter::setMessageSpecification()</a>, and <a class="el" href="classcluon_1_1LCMToGenericMessage.html#ae807e1b1dc231c340d8360a1297f0488">cluon::LCMToGenericMessage::setMessageSpecification()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcluon_1_1MessageParser_a6ba94f0f1b6a790d8fe436ffa2512892_cgraph.png" border="0" usemap="#aclasscluon_1_1MessageParser_a6ba94f0f1b6a790d8fe436ffa2512892_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="classcluon_1_1MessageParser_a6ba94f0f1b6a790d8fe436ffa2512892_icgraph.png" border="0" usemap="#aclasscluon_1_1MessageParser_a6ba94f0f1b6a790d8fe436ffa2512892_icgraph" alt=""/></div>
</div>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="cluon-complete_8hpp_source.html">cluon-complete.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.3
</small></address>
</body>
</html>
